
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="使用Python类型注解进行数据校验">
      
      
      
        <link rel="canonical" href="https://hellowac.github.io/pydantic-zh-cn/v1.10.7-zh-cn/usage/schema/">
      
      
        <link rel="prev" href="../model_config/">
      
      
        <link rel="next" href="../exporting_models/">
      
      <link rel="icon" href="../../favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.12">
    
    
      
        <title>schema - Pydantic</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.85bb2934.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.a6bdf11c.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../extra/terminal.css">
    
      <link rel="stylesheet" href="../../extra/tweaks.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="pink">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#schema-getting-schema-of-a-specified-type" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="Pydantic" class="md-header__button md-logo" aria-label="Pydantic" data-md-component="logo">
      
  <img src="../../logo-white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Pydantic
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              schema
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="pink"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="pink" data-md-color-accent="pink"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/hellowac/pydantic-zh-cn" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    hellowac/pydantic-zh-cn
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Pydantic" class="md-nav__button md-logo" aria-label="Pydantic" data-md-component="logo">
      
  <img src="../../logo-white.svg" alt="logo">

    </a>
    Pydantic
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/hellowac/pydantic-zh-cn" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    hellowac/pydantic-zh-cn
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        概览
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../install/" class="md-nav__link">
        安装
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          使用指南
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          使用指南
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../models/" class="md-nav__link">
        模型
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../types/" class="md-nav__link">
        字段类型
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../validators/" class="md-nav__link">
        字段校验
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../model_config/" class="md-nav__link">
        模型配置
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          schema
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        schema
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#schema-getting-schema-of-a-specified-type" class="md-nav__link">
    获取指定类型的schema Getting schema of a specified type
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#field-field-customization" class="md-nav__link">
    Field定制 Field customization
  </a>
  
    <nav class="md-nav" aria-label="Field定制 Field customization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#unenforced-field-constraints" class="md-nav__link">
    非强制字段约束 Unenforced Field constraints
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#typingannotated-fields" class="md-nav__link">
    typing.Annotated 字段 Fields
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schema-modifying-schema-in-custom-fields" class="md-nav__link">
    修改自定义字段的schema Modifying schema in custom fields
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#json-schema-types" class="md-nav__link">
    JSON Schema 类型(Types)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schema-top-level-schema-generation" class="md-nav__link">
    顶层Schema生成 Top-level schema generation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schema-schema-customization" class="md-nav__link">
    schema定制 Schema customization
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../exporting_models/" class="md-nav__link">
        模型导出
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dataclasses/" class="md-nav__link">
        数据类
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../validation_decorator/" class="md-nav__link">
        校验装饰器
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../settings/" class="md-nav__link">
        配置管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../postponed_annotations/" class="md-nav__link">
        延迟注解
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mypy/" class="md-nav__link">
        和mypy一起使用
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rich/" class="md-nav__link">
        和rich一起使用
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../devtools/" class="md-nav__link">
        和devtools一起使用
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          博客
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          博客
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../blog/pydantic-v2/" class="md-nav__link">
        Pydantic V2 版本计划
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        贡献参与
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../mypy_plugin/" class="md-nav__link">
        Mypy插件
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../pycharm_plugin/" class="md-nav__link">
        PyCharm插件
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../visual_studio_code/" class="md-nav__link">
        VSCode使用
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../hypothesis_plugin/" class="md-nav__link">
        Hypothesis插件
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../datamodel_code_generator/" class="md-nav__link">
        代码生成
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/" class="md-nav__link">
        更新日志
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#schema-getting-schema-of-a-specified-type" class="md-nav__link">
    获取指定类型的schema Getting schema of a specified type
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#field-field-customization" class="md-nav__link">
    Field定制 Field customization
  </a>
  
    <nav class="md-nav" aria-label="Field定制 Field customization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#unenforced-field-constraints" class="md-nav__link">
    非强制字段约束 Unenforced Field constraints
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#typingannotated-fields" class="md-nav__link">
    typing.Annotated 字段 Fields
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schema-modifying-schema-in-custom-fields" class="md-nav__link">
    修改自定义字段的schema Modifying schema in custom fields
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#json-schema-types" class="md-nav__link">
    JSON Schema 类型(Types)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schema-top-level-schema-generation" class="md-nav__link">
    顶层Schema生成 Top-level schema generation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schema-schema-customization" class="md-nav__link">
    schema定制 Schema customization
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
  <div class="admonition success announcement">
    <p class="admonition-title">Pydantic Company</p>
    <p>我们根据我认为导致 Pydantic 成功的原则创办了一家公司。</p>
    <p>从<a href="https://pydantic.dev/announcement/">公司公告</a>中了解更多信息.</p>
  </div>

  
                  

  
  


  <h1>schema</h1>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>译者注: <strong>JSON Schema</strong> 就是一种描述JSON数据长什么样子的规范和格式，详情参考<a href="https://json-schema.apifox.cn/" target="_blank">JSON Schema 规范（中文版）</a></p>
<p>对于将 JSON-schema 转化为 md 文档，参考: <a href="https://pypi.org/project/jsonschema2md2/" target="_blank">jsonschema2md2</a></p>
<p>对于 在mkdocs 中展示 JSON-schema, 参考: <a href="https://pypi.org/project/mkdocs-schema-reader/" target="_blank">mkdocs-schema-reader</a></p>
<p>对于 直接根据 JSON-schema 生成 HTML文档, 参考: <a href="https://pypi.org/project/json-schema-for-humans/" target="_blank">json-schema-for-humans</a></p>
</div>
<p><em>Pydantic</em> 允许从模型自动创建 JSON 模式(Schema)：</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Python 3.7 及以上版本</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span>
<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>


<span class="k">class</span> <span class="nc">FooBar</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">count</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>


<span class="k">class</span> <span class="nc">Gender</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
    <span class="n">male</span> <span class="o">=</span> <span class="s1">&#39;male&#39;</span>
    <span class="n">female</span> <span class="o">=</span> <span class="s1">&#39;female&#39;</span>
    <span class="n">other</span> <span class="o">=</span> <span class="s1">&#39;other&#39;</span>
    <span class="n">not_given</span> <span class="o">=</span> <span class="s1">&#39;not_given&#39;</span>


<span class="k">class</span> <span class="nc">MainModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This is the description of the main model</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">foo_bar</span><span class="p">:</span> <span class="n">FooBar</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
    <span class="n">gender</span><span class="p">:</span> <span class="n">Gender</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="s1">&#39;Gender&#39;</span><span class="p">)</span>
    <span class="n">snap</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="mi">42</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s1">&#39;The Snap&#39;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s1">&#39;this is the value of snap&#39;</span><span class="p">,</span>
        <span class="n">gt</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
        <span class="n">lt</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Main&#39;</span>


<span class="c1"># this is equivalent to json.dumps(MainModel.schema(), indent=2):</span>
<span class="nb">print</span><span class="p">(</span><span class="n">MainModel</span><span class="o">.</span><span class="n">schema_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</code></pre></div>
</div>
</div>
</div>
<p><em>(这个脚本是完整的，它应该“按原样”运行)</em></p>
<p>输出:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Main&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;This is the description of the main model&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;foo_bar&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/definitions/FooBar&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;Gender&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;$ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/definitions/Gender&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;snap&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The Snap&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;this is the value of snap&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;exclusiveMinimum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;exclusiveMaximum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;foo_bar&quot;</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;definitions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;FooBar&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FooBar&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;count&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Count&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;size&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Size&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;number&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;count&quot;</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;Gender&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Gender&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;An enumeration.&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;enum&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;male&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;female&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;other&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;not_given&quot;</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<p>生成的模式符合规范：
<a href="https://json-schema.org/latest/json-schema-core.html">JSON Schema Core</a>,
<a href="https://json-schema.org/latest/json-schema-validation.html">JSON Schema Validation</a> 和
<a href="https://github.com/OAI/OpenAPI-Specification">OpenAPI</a>.</p>
<p><code>BaseModel.schema</code> 将返回模式的字典，而 <code>BaseModel.schema_json</code> 将返回该字典的 JSON 字符串表示。</p>
<p>根据规范，使用的子模型被添加到 <code>definitions</code> JSON 属性中并被引用。</p>
<p>所有子模型（及其子模型）模式都直接放在顶级“定义”JSON 键中，以便于重用和参考。</p>
<p>带有自定义标题、描述或默认值等修改（通过 <code>Field</code> 类）的“子模型”被递归包含，而不是被引用。</p>
<p>模型的 <code>description</code> 取自类的文档字符串或<code>Field</code>类的参数 <code>description</code> 。</p>
<p>默认情况下，模式是使用别名作为键生成的，但可以使用模型属性名称通过调用 <code>MainModel.schema/schema_json(by_alias=False)</code> 来生成。</p>
<p><code>$ref</code> 的格式（上面的<code>"#/definitions/FooBar"</code>）可以通过使用 <code>ref_template</code> 关键字参数调用 <code>schema()</code> 或 <code>schema_json()</code> 来改变，
例如 <code>ApplePie.schema(ref_template='/schemas/{model}.json#/')</code>，这里的 <code>{model}</code> 将替换为使用 <code>str.format()</code> 的模型命名。</p>
<h2 id="schema-getting-schema-of-a-specified-type">获取指定类型的schema Getting schema of a specified type<a class="headerlink" href="#schema-getting-schema-of-a-specified-type" title="Permanent link">&para;</a></h2>
<p><em>Pydantic</em> 包括两个独立的实用程序函数 <code>schema_of</code> 和 <code>schema_json_of</code>，可用于以更特殊的方式应用用于 <em>pydantic</em> 模型的模式生成逻辑。
这些函数的行为类似于 <code>BaseModel.schema</code> 和 <code>BaseModel.schema_json</code>，但适用于任意与 pydantic 兼容的类型。</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Python 3.7 及以上版本</label><label for="__tabbed_2_2">Python 3.9 及以上版本</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Literal</span><span class="p">,</span> <span class="n">Union</span>

<span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Annotated</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span><span class="p">,</span> <span class="n">schema_json_of</span>


<span class="k">class</span> <span class="nc">Cat</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">pet_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;cat&#39;</span><span class="p">]</span>
    <span class="n">cat_name</span><span class="p">:</span> <span class="nb">str</span>


<span class="k">class</span> <span class="nc">Dog</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">pet_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;dog&#39;</span><span class="p">]</span>
    <span class="n">dog_name</span><span class="p">:</span> <span class="nb">str</span>


<span class="n">Pet</span> <span class="o">=</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Cat</span><span class="p">,</span> <span class="n">Dog</span><span class="p">],</span> <span class="n">Field</span><span class="p">(</span><span class="n">discriminator</span><span class="o">=</span><span class="s1">&#39;pet_type&#39;</span><span class="p">)]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">schema_json_of</span><span class="p">(</span><span class="n">Pet</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;The Pet Schema&#39;</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">{</span>
<span class="sd">  &quot;title&quot;: &quot;The Pet Schema&quot;,</span>
<span class="sd">  &quot;discriminator&quot;: {</span>
<span class="sd">    &quot;propertyName&quot;: &quot;pet_type&quot;,</span>
<span class="sd">    &quot;mapping&quot;: {</span>
<span class="sd">      &quot;cat&quot;: &quot;#/definitions/Cat&quot;,</span>
<span class="sd">      &quot;dog&quot;: &quot;#/definitions/Dog&quot;</span>
<span class="sd">    }</span>
<span class="sd">  },</span>
<span class="sd">  &quot;oneOf&quot;: [</span>
<span class="sd">    {</span>
<span class="sd">      &quot;$ref&quot;: &quot;#/definitions/Cat&quot;</span>
<span class="sd">    },</span>
<span class="sd">    {</span>
<span class="sd">      &quot;$ref&quot;: &quot;#/definitions/Dog&quot;</span>
<span class="sd">    }</span>
<span class="sd">  ],</span>
<span class="sd">  &quot;definitions&quot;: {</span>
<span class="sd">    &quot;Cat&quot;: {</span>
<span class="sd">      &quot;title&quot;: &quot;Cat&quot;,</span>
<span class="sd">      &quot;type&quot;: &quot;object&quot;,</span>
<span class="sd">      &quot;properties&quot;: {</span>
<span class="sd">        &quot;pet_type&quot;: {</span>
<span class="sd">          &quot;title&quot;: &quot;Pet Type&quot;,</span>
<span class="sd">          &quot;enum&quot;: [</span>
<span class="sd">            &quot;cat&quot;</span>
<span class="sd">          ],</span>
<span class="sd">          &quot;type&quot;: &quot;string&quot;</span>
<span class="sd">        },</span>
<span class="sd">        &quot;cat_name&quot;: {</span>
<span class="sd">          &quot;title&quot;: &quot;Cat Name&quot;,</span>
<span class="sd">          &quot;type&quot;: &quot;string&quot;</span>
<span class="sd">        }</span>
<span class="sd">      },</span>
<span class="sd">      &quot;required&quot;: [</span>
<span class="sd">        &quot;pet_type&quot;,</span>
<span class="sd">        &quot;cat_name&quot;</span>
<span class="sd">      ]</span>
<span class="sd">    },</span>
<span class="sd">    &quot;Dog&quot;: {</span>
<span class="sd">      &quot;title&quot;: &quot;Dog&quot;,</span>
<span class="sd">      &quot;type&quot;: &quot;object&quot;,</span>
<span class="sd">      &quot;properties&quot;: {</span>
<span class="sd">        &quot;pet_type&quot;: {</span>
<span class="sd">          &quot;title&quot;: &quot;Pet Type&quot;,</span>
<span class="sd">          &quot;enum&quot;: [</span>
<span class="sd">            &quot;dog&quot;</span>
<span class="sd">          ],</span>
<span class="sd">          &quot;type&quot;: &quot;string&quot;</span>
<span class="sd">        },</span>
<span class="sd">        &quot;dog_name&quot;: {</span>
<span class="sd">          &quot;title&quot;: &quot;Dog Name&quot;,</span>
<span class="sd">          &quot;type&quot;: &quot;string&quot;</span>
<span class="sd">        }</span>
<span class="sd">      },</span>
<span class="sd">      &quot;required&quot;: [</span>
<span class="sd">        &quot;pet_type&quot;,</span>
<span class="sd">        &quot;dog_name&quot;</span>
<span class="sd">      ]</span>
<span class="sd">    }</span>
<span class="sd">  }</span>
<span class="sd">}</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Literal</span><span class="p">,</span> <span class="n">Union</span>

<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span><span class="p">,</span> <span class="n">schema_json_of</span>


<span class="k">class</span> <span class="nc">Cat</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">pet_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;cat&#39;</span><span class="p">]</span>
    <span class="n">cat_name</span><span class="p">:</span> <span class="nb">str</span>


<span class="k">class</span> <span class="nc">Dog</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">pet_type</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;dog&#39;</span><span class="p">]</span>
    <span class="n">dog_name</span><span class="p">:</span> <span class="nb">str</span>


<span class="n">Pet</span> <span class="o">=</span> <span class="n">Annotated</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Cat</span><span class="p">,</span> <span class="n">Dog</span><span class="p">],</span> <span class="n">Field</span><span class="p">(</span><span class="n">discriminator</span><span class="o">=</span><span class="s1">&#39;pet_type&#39;</span><span class="p">)]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">schema_json_of</span><span class="p">(</span><span class="n">Pet</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;The Pet Schema&#39;</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">{</span>
<span class="sd">  &quot;title&quot;: &quot;The Pet Schema&quot;,</span>
<span class="sd">  &quot;discriminator&quot;: {</span>
<span class="sd">    &quot;propertyName&quot;: &quot;pet_type&quot;,</span>
<span class="sd">    &quot;mapping&quot;: {</span>
<span class="sd">      &quot;cat&quot;: &quot;#/definitions/Cat&quot;,</span>
<span class="sd">      &quot;dog&quot;: &quot;#/definitions/Dog&quot;</span>
<span class="sd">    }</span>
<span class="sd">  },</span>
<span class="sd">  &quot;oneOf&quot;: [</span>
<span class="sd">    {</span>
<span class="sd">      &quot;$ref&quot;: &quot;#/definitions/Cat&quot;</span>
<span class="sd">    },</span>
<span class="sd">    {</span>
<span class="sd">      &quot;$ref&quot;: &quot;#/definitions/Dog&quot;</span>
<span class="sd">    }</span>
<span class="sd">  ],</span>
<span class="sd">  &quot;definitions&quot;: {</span>
<span class="sd">    &quot;Cat&quot;: {</span>
<span class="sd">      &quot;title&quot;: &quot;Cat&quot;,</span>
<span class="sd">      &quot;type&quot;: &quot;object&quot;,</span>
<span class="sd">      &quot;properties&quot;: {</span>
<span class="sd">        &quot;pet_type&quot;: {</span>
<span class="sd">          &quot;title&quot;: &quot;Pet Type&quot;,</span>
<span class="sd">          &quot;enum&quot;: [</span>
<span class="sd">            &quot;cat&quot;</span>
<span class="sd">          ],</span>
<span class="sd">          &quot;type&quot;: &quot;string&quot;</span>
<span class="sd">        },</span>
<span class="sd">        &quot;cat_name&quot;: {</span>
<span class="sd">          &quot;title&quot;: &quot;Cat Name&quot;,</span>
<span class="sd">          &quot;type&quot;: &quot;string&quot;</span>
<span class="sd">        }</span>
<span class="sd">      },</span>
<span class="sd">      &quot;required&quot;: [</span>
<span class="sd">        &quot;pet_type&quot;,</span>
<span class="sd">        &quot;cat_name&quot;</span>
<span class="sd">      ]</span>
<span class="sd">    },</span>
<span class="sd">    &quot;Dog&quot;: {</span>
<span class="sd">      &quot;title&quot;: &quot;Dog&quot;,</span>
<span class="sd">      &quot;type&quot;: &quot;object&quot;,</span>
<span class="sd">      &quot;properties&quot;: {</span>
<span class="sd">        &quot;pet_type&quot;: {</span>
<span class="sd">          &quot;title&quot;: &quot;Pet Type&quot;,</span>
<span class="sd">          &quot;enum&quot;: [</span>
<span class="sd">            &quot;dog&quot;</span>
<span class="sd">          ],</span>
<span class="sd">          &quot;type&quot;: &quot;string&quot;</span>
<span class="sd">        },</span>
<span class="sd">        &quot;dog_name&quot;: {</span>
<span class="sd">          &quot;title&quot;: &quot;Dog Name&quot;,</span>
<span class="sd">          &quot;type&quot;: &quot;string&quot;</span>
<span class="sd">        }</span>
<span class="sd">      },</span>
<span class="sd">      &quot;required&quot;: [</span>
<span class="sd">        &quot;pet_type&quot;,</span>
<span class="sd">        &quot;dog_name&quot;</span>
<span class="sd">      ]</span>
<span class="sd">    }</span>
<span class="sd">  }</span>
<span class="sd">}</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<p><em>(这个脚本是完整的，它应该“按原样”运行)</em></p>
<h2 id="field-field-customization">Field定制 Field customization<a class="headerlink" href="#field-field-customization" title="Permanent link">&para;</a></h2>
<p>可选地，<code>Field</code>函数可用于提供有关字段和验证的额外信息。</p>
<p>它有以下参数：</p>
<ul>
<li><code>default</code>: （位置参数）字段的默认值。
    由于 <code>Field</code> 替换了字段的默认值，因此第一个参数可用于设置默认值。
    使用省略号 (<code>...</code>) 表示该字段是必填项。</li>
<li><code>default_factory</code>: 当此字段需要默认值时将调用的零参数可调用对象。
    除其他用途外，这可用于设置动态默认值。
    禁止同时设置 <code>default</code> 和 <code>default_factory</code>。</li>
<li><code>alias</code>: 字段的公开名称</li>
<li><code>title</code>: 如果省略，则使用 <code>field_name.title()</code></li>
<li><code>description</code>: 如果省略并且注解是子模型，则将使用子模型的文档字符串</li>
<li><code>exclude</code>: 转储（<code>.dict</code> 和 <code>.json</code>）实例时排除此字段。 <a href="../exporting_models/#advanced-include-and-exclude">导出模型部分</a> 中详细描述了确切的语法和配置选项。</li>
<li><code>include</code>: 转储（<code>.dict</code> 和 <code>.json</code>）实例时（仅）包含此字段。 <a href="../exporting_models/#advanced-include-and-exclude">导出模型部分</a> 中详细描述了确切的语法和配置选项。</li>
<li><code>const</code>: 如果存在，此参数<em>必须</em>与字段的默认值相同。</li>
<li><code>gt</code>: 对于数值（<code>int</code>、<code>float</code>、<code>Decimal</code>），向 JSON Schema 添加“大于”验证和 <code>exclusiveMinimum</code> 注释</li>
<li><code>ge</code>: 对于数值，这会向 JSON 模式添加“大于或等于”验证和<code>最小值(minimum)</code>注释</li>
<li><code>lt</code>: 对于数值，这会向 JSON 模式添加“小于”验证和<code>exclusiveMinimum</code>注释</li>
<li><code>le</code>: 对于数值，这会向 JSON 模式添加“小于或等于”验证和<code>最大值(maximum)</code>注释</li>
<li><code>multiple_of</code>: 对于数值，这会向 JSON 模式添加“倍数”的验证和<code>multipleOf</code>的注释</li>
<li><code>max_digits</code>: 对于 <code>Decimal</code> 值，这会添加验证以在小数点内具有最大位数。 它不包括小数点前的零或尾随的小数零。</li>
<li><code>decimal_places</code>: 对于 <code>Decimal</code>值，这会添加一个验证，以允许最多有多个小数位。 它不包括尾随的小数零。</li>
<li><code>min_items</code>: 对于列表值，这会向 JSON 模式添加相应的验证和 <code>minItems</code> 的注释</li>
<li><code>max_items</code>: 对于列表值，这会向 JSON 模式添加相应的验证和 <code>maxItems</code> 的注释</li>
<li><code>unique_items</code>: 对于列表值，这会向 JSON 模式添加相应的验证和 <code>uniqueItems</code> 的注释</li>
<li><code>min_length</code>: 对于字符串值，这会向 JSON 模式添加相应的验证和 <code>minLength</code> 注释</li>
<li><code>max_length</code>: 对于字符串值，这会向 JSON 模式添加相应的验证和 <code>maxLength</code> 注释</li>
<li><code>allow_mutation</code>: 一个默认为 <code>True</code> 的布尔值。 为 False 时，如果字段是在实例上分配的，则该字段会引发 <code>TypeError</code>。 模型配置必须将<code>validate_assignment</code>设置为<code>True</code>才能执行此检查。</li>
<li>
<p><code>regex</code>: 对于字符串值，这会向 JSON 模式添加从传递的字符串生成的正则表达式验证和 <code>pattern</code> 注释</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><em>pydantic</em> 使用 <code>re.match</code> 验证字符串，它将正则表达式视为隐式锚定在开头。 相反，JSON Schema 验证器将 <code>pattern</code> 关键字视为隐式未锚定的，更像是 <code>re.search</code> 所做的。</p>
<p>对于互操作性，根据您想要的行为，要么显式地使用 <code>^</code> 锚定您的正则表达式（例如 <code>^foo</code> 以匹配任何以 <code>foo</code> 开头的字符串），或者显式地允许带有 <code>.*?</code> 的任意前缀（例如 <code>.*?foo</code> 匹配任何包含子字符串 <code>foo</code> 的字符串）。</p>
<p>请参阅 <a href="https://github.com/pydantic/pydantic/issues/1631">#1631</a>，了解 <strong>v2</strong> 中对 <em>pydantic</em> 行为的可能更改的讨论。</p>
</div>
</li>
</ul>
<ul>
<li><code>repr</code>: 一个默认为<code>True</code>的布尔值。 当为 False 时，该字段应从对象表示中隐藏。</li>
<li><code>**</code> 任何其他关键字参数（例如 <code>examples</code>）将被逐字添加到字段的模式中</li>
</ul>
<p>除了使用<code>Field</code>，<a href="../model_config/">Config 类</a> 的<code>fields</code>属性可用于设置除<code>default</code>之外的所有上述参数。</p>
<h3 id="unenforced-field-constraints">非强制字段约束 Unenforced Field constraints<a class="headerlink" href="#unenforced-field-constraints" title="Permanent link">&para;</a></h3>
<p>如果 <em>pydantic</em> 发现未强制执行的约束，则会引发错误。 如果你想强制约束出现在模式中，即使它在解析时没有被检查，你可以使用带有原始模式属性名称的 <code>Field()</code> 的可变参数：</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:1"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Python 3.7 及以上版本</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span><span class="p">,</span> <span class="n">PositiveInt</span>

<span class="k">try</span><span class="p">:</span>
    <span class="c1"># this won&#39;t work since PositiveInt takes precedence over the</span>
    <span class="c1"># constraints defined in Field meaning they&#39;re ignored</span>
    <span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
        <span class="n">foo</span><span class="p">:</span> <span class="n">PositiveInt</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">lt</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    On field &quot;foo&quot; the following field constraints are set but not enforced:</span>
<span class="sd">    lt.</span>
<span class="sd">    For more details see https://docs.pydantic.dev/usage/schema/#unenforced-</span>
<span class="sd">    field-constraints</span>
<span class="sd">    &quot;&quot;&quot;</span>


<span class="c1"># but you can set the schema attribute directly:</span>
<span class="c1"># (Note: here exclusiveMaximum will not be enforce)</span>
<span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">foo</span><span class="p">:</span> <span class="n">PositiveInt</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">exclusiveMaximum</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Model</span><span class="o">.</span><span class="n">schema</span><span class="p">())</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">{</span>
<span class="sd">    &#39;title&#39;: &#39;Model&#39;,</span>
<span class="sd">    &#39;type&#39;: &#39;object&#39;,</span>
<span class="sd">    &#39;properties&#39;: {</span>
<span class="sd">        &#39;foo&#39;: {</span>
<span class="sd">            &#39;title&#39;: &#39;Foo&#39;,</span>
<span class="sd">            &#39;exclusiveMaximum&#39;: 10,</span>
<span class="sd">            &#39;exclusiveMinimum&#39;: 0,</span>
<span class="sd">            &#39;type&#39;: &#39;integer&#39;,</span>
<span class="sd">        },</span>
<span class="sd">    },</span>
<span class="sd">    &#39;required&#39;: [&#39;foo&#39;],</span>
<span class="sd">}</span>
<span class="sd">&quot;&quot;&quot;</span>


<span class="c1"># if you find yourself needing this, an alternative is to declare</span>
<span class="c1"># the constraints in Field (or you could use conint())</span>
<span class="c1"># here both constraints will be enforced:</span>
<span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="c1"># Here both constraints will be applied and the schema</span>
    <span class="c1"># will be generated correctly</span>
    <span class="n">foo</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">gt</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">lt</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Model</span><span class="o">.</span><span class="n">schema</span><span class="p">())</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">{</span>
<span class="sd">    &#39;title&#39;: &#39;Model&#39;,</span>
<span class="sd">    &#39;type&#39;: &#39;object&#39;,</span>
<span class="sd">    &#39;properties&#39;: {</span>
<span class="sd">        &#39;foo&#39;: {</span>
<span class="sd">            &#39;title&#39;: &#39;Foo&#39;,</span>
<span class="sd">            &#39;exclusiveMinimum&#39;: 0,</span>
<span class="sd">            &#39;exclusiveMaximum&#39;: 10,</span>
<span class="sd">            &#39;type&#39;: &#39;integer&#39;,</span>
<span class="sd">        },</span>
<span class="sd">    },</span>
<span class="sd">    &#39;required&#39;: [&#39;foo&#39;],</span>
<span class="sd">}</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<p><em>(这个脚本是完整的，它应该“按原样”运行)</em></p>
<h3 id="typingannotated-fields">typing.Annotated 字段 Fields<a class="headerlink" href="#typingannotated-fields" title="Permanent link">&para;</a></h3>
<p>与其分配<code>Field</code>值，不如在类型提示中使用<code>typing.Annotated</code>指定：</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Python 3.7 及以上版本</label><label for="__tabbed_4_2">Python 3.9 及以上版本</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">uuid</span> <span class="kn">import</span> <span class="n">uuid4</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>
<span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Annotated</span>


<span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">uuid4</span><span class="p">()</span><span class="o">.</span><span class="n">hex</span><span class="p">)]</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Field</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">256</span><span class="p">)]</span> <span class="o">=</span> <span class="s1">&#39;Bar&#39;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">uuid</span> <span class="kn">import</span> <span class="n">uuid4</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Annotated</span>


<span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">uuid4</span><span class="p">()</span><span class="o">.</span><span class="n">hex</span><span class="p">)]</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Field</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">256</span><span class="p">)]</span> <span class="o">=</span> <span class="s1">&#39;Bar&#39;</span>
</code></pre></div>
</div>
</div>
</div>
<p><em>(这个脚本是完整的，它应该“按原样”运行)</em></p>
<p><code>Field</code> 每个字段只能提供一次 - 如果在 <code>Annotated</code> 中使用并作为赋值，将引发错误。</p>
<p>默认值可以在 <code>Annotated</code> 之外设置为指定值，也可以在 <code>Annotated</code> 内使用 <code>Field.default_factory</code> 设置 - <code>Field.default</code> 参数在 <code>Annotated</code> 中不受支持。</p>
<p>对于 3.9 之前的 Python 版本，可以使用 <code>typing_extensions.Annotated</code>。</p>
<h2 id="schema-modifying-schema-in-custom-fields">修改自定义字段的schema Modifying schema in custom fields<a class="headerlink" href="#schema-modifying-schema-in-custom-fields" title="Permanent link">&para;</a></h2>
<p>自定义字段类型可以使用 <code>__modify_schema__</code> 类方法自定义为它们生成的模式； 有关详细信息，请参阅 <a href="../types/#custom-data-types">自定义数据类型</a>。</p>
<p><code>__modify_schema__</code> 也可以采用类型为 <code>Optional[ModelField]</code> 的 <code>field</code> 参数。 <em>pydantic</em> 将检查 <code>__modify_schema__</code> 的签名以确定是否应包含 <code>field</code> 参数。</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:3"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><input id="__tabbed_5_3" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Python 3.7 及以上版本</label><label for="__tabbed_5_2">Python 3.9 及以上版本</label><label for="__tabbed_5_3">Python 3.10 及以上版本</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Generator</span><span class="p">,</span> <span class="n">Optional</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>
<span class="kn">from</span> <span class="nn">pydantic.fields</span> <span class="kn">import</span> <span class="n">ModelField</span>


<span class="k">class</span> <span class="nc">RestrictedAlphabetStr</span><span class="p">(</span><span class="nb">str</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">__get_validators__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Callable</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="k">yield</span> <span class="bp">cls</span><span class="o">.</span><span class="n">validate</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">field</span><span class="p">:</span> <span class="n">ModelField</span><span class="p">):</span>
        <span class="n">alphabet</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">field_info</span><span class="o">.</span><span class="n">extra</span><span class="p">[</span><span class="s1">&#39;alphabet&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">c</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">alphabet</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">value</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">value</span><span class="si">!r}</span><span class="s1"> is not restricted to </span><span class="si">{</span><span class="n">alphabet</span><span class="si">!r}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">__modify_schema__</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">field_schema</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">field</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ModelField</span><span class="p">]</span>
    <span class="p">):</span>
        <span class="k">if</span> <span class="n">field</span><span class="p">:</span>
            <span class="n">alphabet</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">field_info</span><span class="o">.</span><span class="n">extra</span><span class="p">[</span><span class="s1">&#39;alphabet&#39;</span><span class="p">]</span>
            <span class="n">field_schema</span><span class="p">[</span><span class="s1">&#39;examples&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span> <span class="o">*</span> <span class="mi">3</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">alphabet</span><span class="p">]</span>


<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">value</span><span class="p">:</span> <span class="n">RestrictedAlphabetStr</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">alphabet</span><span class="o">=</span><span class="s1">&#39;ABC&#39;</span><span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="n">MyModel</span><span class="o">.</span><span class="n">schema_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">Optional</span>
<span class="kn">from</span> <span class="nn">collections.abc</span> <span class="kn">import</span> <span class="n">Generator</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>
<span class="kn">from</span> <span class="nn">pydantic.fields</span> <span class="kn">import</span> <span class="n">ModelField</span>


<span class="k">class</span> <span class="nc">RestrictedAlphabetStr</span><span class="p">(</span><span class="nb">str</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">__get_validators__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Callable</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="k">yield</span> <span class="bp">cls</span><span class="o">.</span><span class="n">validate</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">field</span><span class="p">:</span> <span class="n">ModelField</span><span class="p">):</span>
        <span class="n">alphabet</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">field_info</span><span class="o">.</span><span class="n">extra</span><span class="p">[</span><span class="s1">&#39;alphabet&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">c</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">alphabet</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">value</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">value</span><span class="si">!r}</span><span class="s1"> is not restricted to </span><span class="si">{</span><span class="n">alphabet</span><span class="si">!r}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">__modify_schema__</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">field_schema</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">field</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ModelField</span><span class="p">]</span>
    <span class="p">):</span>
        <span class="k">if</span> <span class="n">field</span><span class="p">:</span>
            <span class="n">alphabet</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">field_info</span><span class="o">.</span><span class="n">extra</span><span class="p">[</span><span class="s1">&#39;alphabet&#39;</span><span class="p">]</span>
            <span class="n">field_schema</span><span class="p">[</span><span class="s1">&#39;examples&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span> <span class="o">*</span> <span class="mi">3</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">alphabet</span><span class="p">]</span>


<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">value</span><span class="p">:</span> <span class="n">RestrictedAlphabetStr</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">alphabet</span><span class="o">=</span><span class="s1">&#39;ABC&#39;</span><span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="n">MyModel</span><span class="o">.</span><span class="n">schema_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span>
<span class="kn">from</span> <span class="nn">collections.abc</span> <span class="kn">import</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">Generator</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>
<span class="kn">from</span> <span class="nn">pydantic.fields</span> <span class="kn">import</span> <span class="n">ModelField</span>


<span class="k">class</span> <span class="nc">RestrictedAlphabetStr</span><span class="p">(</span><span class="nb">str</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">__get_validators__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Callable</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="k">yield</span> <span class="bp">cls</span><span class="o">.</span><span class="n">validate</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">field</span><span class="p">:</span> <span class="n">ModelField</span><span class="p">):</span>
        <span class="n">alphabet</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">field_info</span><span class="o">.</span><span class="n">extra</span><span class="p">[</span><span class="s1">&#39;alphabet&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">c</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">alphabet</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">value</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">value</span><span class="si">!r}</span><span class="s1"> is not restricted to </span><span class="si">{</span><span class="n">alphabet</span><span class="si">!r}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">__modify_schema__</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">field_schema</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">field</span><span class="p">:</span> <span class="n">ModelField</span> <span class="o">|</span> <span class="kc">None</span>
    <span class="p">):</span>
        <span class="k">if</span> <span class="n">field</span><span class="p">:</span>
            <span class="n">alphabet</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">field_info</span><span class="o">.</span><span class="n">extra</span><span class="p">[</span><span class="s1">&#39;alphabet&#39;</span><span class="p">]</span>
            <span class="n">field_schema</span><span class="p">[</span><span class="s1">&#39;examples&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span> <span class="o">*</span> <span class="mi">3</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">alphabet</span><span class="p">]</span>


<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">value</span><span class="p">:</span> <span class="n">RestrictedAlphabetStr</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">alphabet</span><span class="o">=</span><span class="s1">&#39;ABC&#39;</span><span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="n">MyModel</span><span class="o">.</span><span class="n">schema_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</code></pre></div>
</div>
</div>
</div>
<p><em>(这个脚本是完整的，它应该“按原样”运行)</em></p>
<p>输出:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;MyModel&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Value&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;alphabet&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ABC&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;examples&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;AAA&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;BBB&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;CCC&quot;</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;value&quot;</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div></p>
<h2 id="json-schema-types">JSON Schema 类型(Types)<a class="headerlink" href="#json-schema-types" title="Permanent link">&para;</a></h2>
<p>类型、自定义字段类型和约束（如<code>max_length</code>）按以下优先顺序映射到相应的规范格式（当有等效项可用时）：</p>
<ol>
<li><a href="http://json-schema.org/latest/json-schema-core.html#rfc.section.4.3.1">JSON Schema Core</a></li>
<li><a href="http://json-schema.org/latest/json-schema-validation.html">JSON Schema Validation</a></li>
<li><a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.2.md#data-types">OpenAPI Data Types</a></li>
<li>标准的 <code>format</code> JSON 字段用于为更复杂的 <code>string</code> 子类型定义 <em>pydantic</em> 扩展。</li>
</ol>
<p>从 Python / <em>pydantic</em> 到 JSON Schema 的字段模式映射完成如下：</p>
<!--
  Generated from docs/build/schema_mapping.py, DO NOT EDIT THIS FILE DIRECTLY.
  Instead edit docs/build/schema_mapping.py and run `make docs`.
-->

<table style="width:100%">
<thead>
<tr>
  <th>Python type</th>
  <th>JSON Schema Type</th>
  <th>Additional JSON Schema</th>
  <th>Defined in</th>
</tr>
</thead>
<tbody>
<tr>
  <td>
    <code>None</code>
  </td>
  <td>
    <code>null</code>
  </td>
  <td>

  </td>
  <td>
    JSON Schema Core
  </td>
</tr>
<tr>
  <td colspan=4 style="border-top: none; padding-top: 0">
    <em>Same for <code>type(None)</code> or <code>Literal[None]</code></em>
  </td>
</tr>
<tr>
  <td>
    <code>bool</code>
  </td>
  <td>
    <code>boolean</code>
  </td>
  <td>

  </td>
  <td>
    JSON Schema Core
  </td>
</tr>
<tr>
  <td>
    <code>str</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>

  </td>
  <td>
    JSON Schema Core
  </td>
</tr>
<tr>
  <td>
    <code>float</code>
  </td>
  <td>
    <code>number</code>
  </td>
  <td>

  </td>
  <td>
    JSON Schema Core
  </td>
</tr>
<tr>
  <td>
    <code>int</code>
  </td>
  <td>
    <code>integer</code>
  </td>
  <td>

  </td>
  <td>
    JSON Schema Validation
  </td>
</tr>
<tr>
  <td>
    <code>dict</code>
  </td>
  <td>
    <code>object</code>
  </td>
  <td>

  </td>
  <td>
    JSON Schema Core
  </td>
</tr>
<tr>
  <td>
    <code>list</code>
  </td>
  <td>
    <code>array</code>
  </td>
  <td>
    <code>{"items": {}}</code>
  </td>
  <td>
    JSON Schema Core
  </td>
</tr>
<tr>
  <td>
    <code>tuple</code>
  </td>
  <td>
    <code>array</code>
  </td>
  <td>
    <code>{"items": {}}</code>
  </td>
  <td>
    JSON Schema Core
  </td>
</tr>
<tr>
  <td>
    <code>set</code>
  </td>
  <td>
    <code>array</code>
  </td>
  <td>
    <code>{"items": {}, "uniqueItems": true}</code>
  </td>
  <td>
    JSON Schema Validation
  </td>
</tr>
<tr>
  <td>
    <code>frozenset</code>
  </td>
  <td>
    <code>array</code>
  </td>
  <td>
    <code>{"items": {}, "uniqueItems": true}</code>
  </td>
  <td>
    JSON Schema Validation
  </td>
</tr>
<tr>
  <td>
    <code>List[str]</code>
  </td>
  <td>
    <code>array</code>
  </td>
  <td>
    <code>{"items": {"type": "string"}}</code>
  </td>
  <td>
    JSON Schema Validation
  </td>
</tr>
<tr>
  <td colspan=4 style="border-top: none; padding-top: 0">
    <em>And equivalently for any other sub type, e.g. <code>List[int]</code>.</em>
  </td>
</tr>
<tr>
  <td>
    <code>Tuple[str, ...]</code>
  </td>
  <td>
    <code>array</code>
  </td>
  <td>
    <code>{"items": {"type": "string"}}</code>
  </td>
  <td>
    JSON Schema Validation
  </td>
</tr>
<tr>
  <td colspan=4 style="border-top: none; padding-top: 0">
    <em>And equivalently for any other sub type, e.g. <code>Tuple[int, ...]</code>.</em>
  </td>
</tr>
<tr>
  <td>
    <code>Tuple[str, int]</code>
  </td>
  <td>
    <code>array</code>
  </td>
  <td>
    <code>{"items": [{"type": "string"}, {"type": "integer"}], "minItems": 2, "maxItems": 2}</code>
  </td>
  <td>
    JSON Schema Validation
  </td>
</tr>
<tr>
  <td colspan=4 style="border-top: none; padding-top: 0">
    <em>And equivalently for any other set of subtypes. Note: If using schemas for OpenAPI, you shouldn't use this declaration, as it would not be valid in OpenAPI (although it is valid in JSON Schema).</em>
  </td>
</tr>
<tr>
  <td>
    <code>Dict[str, int]</code>
  </td>
  <td>
    <code>object</code>
  </td>
  <td>
    <code>{"additionalProperties": {"type": "integer"}}</code>
  </td>
  <td>
    JSON Schema Validation
  </td>
</tr>
<tr>
  <td colspan=4 style="border-top: none; padding-top: 0">
    <em>And equivalently for any other subfields for dicts. Have in mind that although you can use other types as keys for dicts with Pydantic, only strings are valid keys for JSON, and so, only str is valid as JSON Schema key types.</em>
  </td>
</tr>
<tr>
  <td>
    <code>Union[str, int]</code>
  </td>
  <td>
    <code>anyOf</code>
  </td>
  <td>
    <code>{"anyOf": [{"type": "string"}, {"type": "integer"}]}</code>
  </td>
  <td>
    JSON Schema Validation
  </td>
</tr>
<tr>
  <td colspan=4 style="border-top: none; padding-top: 0">
    <em>And equivalently for any other subfields for unions.</em>
  </td>
</tr>
<tr>
  <td>
    <code>Enum</code>
  </td>
  <td>
    <code>enum</code>
  </td>
  <td>
    <code>{"enum": [...]}</code>
  </td>
  <td>
    JSON Schema Validation
  </td>
</tr>
<tr>
  <td colspan=4 style="border-top: none; padding-top: 0">
    <em>All the literal values in the enum are included in the definition.</em>
  </td>
</tr>
<tr>
  <td>
    <code>SecretStr</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>
    <code>{"writeOnly": true}</code>
  </td>
  <td>
    JSON Schema Validation
  </td>
</tr>
<tr>
  <td>
    <code>SecretBytes</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>
    <code>{"writeOnly": true}</code>
  </td>
  <td>
    JSON Schema Validation
  </td>
</tr>
<tr>
  <td>
    <code>EmailStr</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>
    <code>{"format": "email"}</code>
  </td>
  <td>
    JSON Schema Validation
  </td>
</tr>
<tr>
  <td>
    <code>NameEmail</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>
    <code>{"format": "name-email"}</code>
  </td>
  <td>
    Pydantic standard "format" extension
  </td>
</tr>
<tr>
  <td>
    <code>AnyUrl</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>
    <code>{"format": "uri"}</code>
  </td>
  <td>
    JSON Schema Validation
  </td>
</tr>
<tr>
  <td>
    <code>Pattern</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>
    <code>{"format": "regex"}</code>
  </td>
  <td>
    JSON Schema Validation
  </td>
</tr>
<tr>
  <td>
    <code>bytes</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>
    <code>{"format": "binary"}</code>
  </td>
  <td>
    OpenAPI
  </td>
</tr>
<tr>
  <td>
    <code>Decimal</code>
  </td>
  <td>
    <code>number</code>
  </td>
  <td>

  </td>
  <td>
    JSON Schema Core
  </td>
</tr>
<tr>
  <td>
    <code>UUID1</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>
    <code>{"format": "uuid1"}</code>
  </td>
  <td>
    Pydantic standard "format" extension
  </td>
</tr>
<tr>
  <td>
    <code>UUID3</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>
    <code>{"format": "uuid3"}</code>
  </td>
  <td>
    Pydantic standard "format" extension
  </td>
</tr>
<tr>
  <td>
    <code>UUID4</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>
    <code>{"format": "uuid4"}</code>
  </td>
  <td>
    Pydantic standard "format" extension
  </td>
</tr>
<tr>
  <td>
    <code>UUID5</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>
    <code>{"format": "uuid5"}</code>
  </td>
  <td>
    Pydantic standard "format" extension
  </td>
</tr>
<tr>
  <td>
    <code>UUID</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>
    <code>{"format": "uuid"}</code>
  </td>
  <td>
    Pydantic standard "format" extension
  </td>
</tr>
<tr>
  <td colspan=4 style="border-top: none; padding-top: 0">
    <em>Suggested in OpenAPI.</em>
  </td>
</tr>
<tr>
  <td>
    <code>FilePath</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>
    <code>{"format": "file-path"}</code>
  </td>
  <td>
    Pydantic standard "format" extension
  </td>
</tr>
<tr>
  <td>
    <code>DirectoryPath</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>
    <code>{"format": "directory-path"}</code>
  </td>
  <td>
    Pydantic standard "format" extension
  </td>
</tr>
<tr>
  <td>
    <code>Path</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>
    <code>{"format": "path"}</code>
  </td>
  <td>
    Pydantic standard "format" extension
  </td>
</tr>
<tr>
  <td>
    <code>datetime</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>
    <code>{"format": "date-time"}</code>
  </td>
  <td>
    JSON Schema Validation
  </td>
</tr>
<tr>
  <td>
    <code>date</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>
    <code>{"format": "date"}</code>
  </td>
  <td>
    JSON Schema Validation
  </td>
</tr>
<tr>
  <td>
    <code>time</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>
    <code>{"format": "time"}</code>
  </td>
  <td>
    JSON Schema Validation
  </td>
</tr>
<tr>
  <td>
    <code>timedelta</code>
  </td>
  <td>
    <code>number</code>
  </td>
  <td>
    <code>{"format": "time-delta"}</code>
  </td>
  <td>
    Difference in seconds (a <code>float</code>), with Pydantic standard "format" extension
  </td>
</tr>
<tr>
  <td colspan=4 style="border-top: none; padding-top: 0">
    <em>Suggested in JSON Schema repository's issues by maintainer.</em>
  </td>
</tr>
<tr>
  <td>
    <code>Json</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>
    <code>{"format": "json-string"}</code>
  </td>
  <td>
    Pydantic standard "format" extension
  </td>
</tr>
<tr>
  <td>
    <code>IPv4Address</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>
    <code>{"format": "ipv4"}</code>
  </td>
  <td>
    JSON Schema Validation
  </td>
</tr>
<tr>
  <td>
    <code>IPv6Address</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>
    <code>{"format": "ipv6"}</code>
  </td>
  <td>
    JSON Schema Validation
  </td>
</tr>
<tr>
  <td>
    <code>IPvAnyAddress</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>
    <code>{"format": "ipvanyaddress"}</code>
  </td>
  <td>
    Pydantic standard "format" extension
  </td>
</tr>
<tr>
  <td colspan=4 style="border-top: none; padding-top: 0">
    <em>IPv4 or IPv6 address as used in <code>ipaddress</code> module</em>
  </td>
</tr>
<tr>
  <td>
    <code>IPv4Interface</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>
    <code>{"format": "ipv4interface"}</code>
  </td>
  <td>
    Pydantic standard "format" extension
  </td>
</tr>
<tr>
  <td colspan=4 style="border-top: none; padding-top: 0">
    <em>IPv4 interface as used in <code>ipaddress</code> module</em>
  </td>
</tr>
<tr>
  <td>
    <code>IPv6Interface</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>
    <code>{"format": "ipv6interface"}</code>
  </td>
  <td>
    Pydantic standard "format" extension
  </td>
</tr>
<tr>
  <td colspan=4 style="border-top: none; padding-top: 0">
    <em>IPv6 interface as used in <code>ipaddress</code> module</em>
  </td>
</tr>
<tr>
  <td>
    <code>IPvAnyInterface</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>
    <code>{"format": "ipvanyinterface"}</code>
  </td>
  <td>
    Pydantic standard "format" extension
  </td>
</tr>
<tr>
  <td colspan=4 style="border-top: none; padding-top: 0">
    <em>IPv4 or IPv6 interface as used in <code>ipaddress</code> module</em>
  </td>
</tr>
<tr>
  <td>
    <code>IPv4Network</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>
    <code>{"format": "ipv4network"}</code>
  </td>
  <td>
    Pydantic standard "format" extension
  </td>
</tr>
<tr>
  <td colspan=4 style="border-top: none; padding-top: 0">
    <em>IPv4 network as used in <code>ipaddress</code> module</em>
  </td>
</tr>
<tr>
  <td>
    <code>IPv6Network</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>
    <code>{"format": "ipv6network"}</code>
  </td>
  <td>
    Pydantic standard "format" extension
  </td>
</tr>
<tr>
  <td colspan=4 style="border-top: none; padding-top: 0">
    <em>IPv6 network as used in <code>ipaddress</code> module</em>
  </td>
</tr>
<tr>
  <td>
    <code>IPvAnyNetwork</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>
    <code>{"format": "ipvanynetwork"}</code>
  </td>
  <td>
    Pydantic standard "format" extension
  </td>
</tr>
<tr>
  <td colspan=4 style="border-top: none; padding-top: 0">
    <em>IPv4 or IPv6 network as used in <code>ipaddress</code> module</em>
  </td>
</tr>
<tr>
  <td>
    <code>StrictBool</code>
  </td>
  <td>
    <code>boolean</code>
  </td>
  <td>

  </td>
  <td>
    JSON Schema Core
  </td>
</tr>
<tr>
  <td>
    <code>StrictStr</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>

  </td>
  <td>
    JSON Schema Core
  </td>
</tr>
<tr>
  <td>
    <code>ConstrainedStr</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>

  </td>
  <td>
    JSON Schema Core
  </td>
</tr>
<tr>
  <td colspan=4 style="border-top: none; padding-top: 0">
    <em>If the type has values declared for the constraints, they are included as validations. See the mapping for <code>constr</code> below.</em>
  </td>
</tr>
<tr>
  <td>
    <code>constr(regex='^text$', min_length=2, max_length=10)</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>
    <code>{"pattern": "^text$", "minLength": 2, "maxLength": 10}</code>
  </td>
  <td>
    JSON Schema Validation
  </td>
</tr>
<tr>
  <td colspan=4 style="border-top: none; padding-top: 0">
    <em>Any argument not passed to the function (not defined) will not be included in the schema.</em>
  </td>
</tr>
<tr>
  <td>
    <code>ConstrainedInt</code>
  </td>
  <td>
    <code>integer</code>
  </td>
  <td>

  </td>
  <td>
    JSON Schema Core
  </td>
</tr>
<tr>
  <td colspan=4 style="border-top: none; padding-top: 0">
    <em>If the type has values declared for the constraints, they are included as validations. See the mapping for <code>conint</code> below.</em>
  </td>
</tr>
<tr>
  <td>
    <code>conint(gt=1, ge=2, lt=6, le=5, multiple_of=2)</code>
  </td>
  <td>
    <code>integer</code>
  </td>
  <td>
    <code>{"maximum": 5, "exclusiveMaximum": 6, "minimum": 2, "exclusiveMinimum": 1, "multipleOf": 2}</code>
  </td>
  <td>

  </td>
</tr>
<tr>
  <td colspan=4 style="border-top: none; padding-top: 0">
    <em>Any argument not passed to the function (not defined) will not be included in the schema.</em>
  </td>
</tr>
<tr>
  <td>
    <code>PositiveInt</code>
  </td>
  <td>
    <code>integer</code>
  </td>
  <td>
    <code>{"exclusiveMinimum": 0}</code>
  </td>
  <td>
    JSON Schema Validation
  </td>
</tr>
<tr>
  <td>
    <code>NegativeInt</code>
  </td>
  <td>
    <code>integer</code>
  </td>
  <td>
    <code>{"exclusiveMaximum": 0}</code>
  </td>
  <td>
    JSON Schema Validation
  </td>
</tr>
<tr>
  <td>
    <code>NonNegativeInt</code>
  </td>
  <td>
    <code>integer</code>
  </td>
  <td>
    <code>{"minimum": 0}</code>
  </td>
  <td>
    JSON Schema Validation
  </td>
</tr>
<tr>
  <td>
    <code>NonPositiveInt</code>
  </td>
  <td>
    <code>integer</code>
  </td>
  <td>
    <code>{"maximum": 0}</code>
  </td>
  <td>
    JSON Schema Validation
  </td>
</tr>
<tr>
  <td>
    <code>ConstrainedFloat</code>
  </td>
  <td>
    <code>number</code>
  </td>
  <td>

  </td>
  <td>
    JSON Schema Core
  </td>
</tr>
<tr>
  <td colspan=4 style="border-top: none; padding-top: 0">
    <em>If the type has values declared for the constraints, they are included as validations. See the mapping for <code>confloat</code> below.</em>
  </td>
</tr>
<tr>
  <td>
    <code>confloat(gt=1, ge=2, lt=6, le=5, multiple_of=2)</code>
  </td>
  <td>
    <code>number</code>
  </td>
  <td>
    <code>{"maximum": 5, "exclusiveMaximum": 6, "minimum": 2, "exclusiveMinimum": 1, "multipleOf": 2}</code>
  </td>
  <td>
    JSON Schema Validation
  </td>
</tr>
<tr>
  <td colspan=4 style="border-top: none; padding-top: 0">
    <em>Any argument not passed to the function (not defined) will not be included in the schema.</em>
  </td>
</tr>
<tr>
  <td>
    <code>PositiveFloat</code>
  </td>
  <td>
    <code>number</code>
  </td>
  <td>
    <code>{"exclusiveMinimum": 0}</code>
  </td>
  <td>
    JSON Schema Validation
  </td>
</tr>
<tr>
  <td>
    <code>NegativeFloat</code>
  </td>
  <td>
    <code>number</code>
  </td>
  <td>
    <code>{"exclusiveMaximum": 0}</code>
  </td>
  <td>
    JSON Schema Validation
  </td>
</tr>
<tr>
  <td>
    <code>NonNegativeFloat</code>
  </td>
  <td>
    <code>number</code>
  </td>
  <td>
    <code>{"minimum": 0}</code>
  </td>
  <td>
    JSON Schema Validation
  </td>
</tr>
<tr>
  <td>
    <code>NonPositiveFloat</code>
  </td>
  <td>
    <code>number</code>
  </td>
  <td>
    <code>{"maximum": 0}</code>
  </td>
  <td>
    JSON Schema Validation
  </td>
</tr>
<tr>
  <td>
    <code>ConstrainedDecimal</code>
  </td>
  <td>
    <code>number</code>
  </td>
  <td>

  </td>
  <td>
    JSON Schema Core
  </td>
</tr>
<tr>
  <td colspan=4 style="border-top: none; padding-top: 0">
    <em>If the type has values declared for the constraints, they are included as validations. See the mapping for <code>condecimal</code> below.</em>
  </td>
</tr>
<tr>
  <td>
    <code>condecimal(gt=1, ge=2, lt=6, le=5, multiple_of=2)</code>
  </td>
  <td>
    <code>number</code>
  </td>
  <td>
    <code>{"maximum": 5, "exclusiveMaximum": 6, "minimum": 2, "exclusiveMinimum": 1, "multipleOf": 2}</code>
  </td>
  <td>
    JSON Schema Validation
  </td>
</tr>
<tr>
  <td colspan=4 style="border-top: none; padding-top: 0">
    <em>Any argument not passed to the function (not defined) will not be included in the schema.</em>
  </td>
</tr>
<tr>
  <td>
    <code>BaseModel</code>
  </td>
  <td>
    <code>object</code>
  </td>
  <td>

  </td>
  <td>
    JSON Schema Core
  </td>
</tr>
<tr>
  <td colspan=4 style="border-top: none; padding-top: 0">
    <em>All the properties defined will be defined with standard JSON Schema, including submodels.</em>
  </td>
</tr>
<tr>
  <td>
    <code>Color</code>
  </td>
  <td>
    <code>string</code>
  </td>
  <td>
    <code>{"format": "color"}</code>
  </td>
  <td>
    Pydantic standard "format" extension
  </td>
</tr>
</tbody>
</table>

<h2 id="schema-top-level-schema-generation">顶层Schema生成 Top-level schema generation<a class="headerlink" href="#schema-top-level-schema-generation" title="Permanent link">&para;</a></h2>
<p>您还可以生成一个顶级 JSON 架构，该架构仅在其<code>definitions</code>中包含模型列表和相关子模型：</p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:1"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">Python 3.7 及以上版本</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<span class="kn">from</span> <span class="nn">pydantic.schema</span> <span class="kn">import</span> <span class="n">schema</span>


<span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">a</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>


<span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">b</span><span class="p">:</span> <span class="n">Foo</span>


<span class="k">class</span> <span class="nc">Bar</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">c</span><span class="p">:</span> <span class="nb">int</span>


<span class="n">top_level_schema</span> <span class="o">=</span> <span class="n">schema</span><span class="p">([</span><span class="n">Model</span><span class="p">,</span> <span class="n">Bar</span><span class="p">],</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;My Schema&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">top_level_schema</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</code></pre></div>
</div>
</div>
</div>
<p><em>(这个脚本是完整的，它应该“按原样”运行)</em></p>
<p>输出:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;My Schema&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;definitions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;Foo&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Foo&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;a&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;A&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;Model&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Model&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;b&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;$ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/definitions/Foo&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;b&quot;</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;Bar&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Bar&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;c&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;C&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;c&quot;</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<h2 id="schema-schema-customization">schema定制 Schema customization<a class="headerlink" href="#schema-schema-customization" title="Permanent link">&para;</a></h2>
<p>您可以自定义生成的 <code>$ref</code> JSON 位置：定义始终存储在键 <code>definitions</code> 下，但可以为引用使用指定的前缀。</p>
<p>如果您需要扩展或修改 JSON Schema 默认定义位置，这将很有用。 例如: 使用 OpenAPI：</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:1"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">Python 3.7 及以上版本</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
<span class="kn">from</span> <span class="nn">pydantic.schema</span> <span class="kn">import</span> <span class="n">schema</span>


<span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">a</span><span class="p">:</span> <span class="nb">int</span>


<span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">a</span><span class="p">:</span> <span class="n">Foo</span>


<span class="c1"># Default location for OpenAPI</span>
<span class="n">top_level_schema</span> <span class="o">=</span> <span class="n">schema</span><span class="p">([</span><span class="n">Model</span><span class="p">],</span> <span class="n">ref_prefix</span><span class="o">=</span><span class="s1">&#39;#/components/schemas/&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">top_level_schema</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</code></pre></div>
</div>
</div>
</div>
<p><em>(这个脚本是完整的，它应该“按原样”运行)</em></p>
<p>输出:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;definitions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;Foo&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Foo&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;a&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;A&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;a&quot;</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;Model&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Model&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;a&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;$ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/components/schemas/Foo&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;a&quot;</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<p>也可以扩展/覆盖模型中生成的 JSON 模式。</p>
<p>为此，请使用<code>Config</code>子类属性<code>schema_extra</code>。</p>
<p>例如，您可以将 <code>examples</code> 添加到 JSON Schema：</p>
<div class="tabbed-set tabbed-alternate" data-tabs="8:1"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">Python 3.7 及以上版本</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">schema_extra</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;examples&#39;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;John Doe&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">}</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Person</span><span class="o">.</span><span class="n">schema_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</code></pre></div>
</div>
</div>
</div>
<p><em>(这个脚本是完整的，它应该“按原样”运行)</em></p>
<p>输出:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Person&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Name&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;age&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Age&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;name&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;age&quot;</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;examples&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;John Doe&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;age&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div></p>
<p>对于更细粒度的控制，您可以选择将 <code>schema_extra</code> 设置为可调用的，并对生成的模式进行后处理。
可调用对象可以有一个或两个位置参数。
第一个是模式字典。
第二个，如果被接受，将是模型类。
可调用对象预计会<em>就地</em>改变模式字典； 不使用返回值。</p>
<p>例如，可以从模型的“属性”中删除“标题”键：</p>
<div class="tabbed-set tabbed-alternate" data-tabs="9:2"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><input id="__tabbed_9_2" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="__tabbed_9_1">Python 3.7 及以上版本</label><label for="__tabbed_9_2">Python 3.9 及以上版本</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Type</span>
<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="nd">@staticmethod</span>
        <span class="k">def</span> <span class="nf">schema_extra</span><span class="p">(</span><span class="n">schema</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">model</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="s1">&#39;Person&#39;</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">schema</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;properties&#39;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="n">prop</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Person</span><span class="o">.</span><span class="n">schema_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span>
<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="nd">@staticmethod</span>
        <span class="k">def</span> <span class="nf">schema_extra</span><span class="p">(</span><span class="n">schema</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">model</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="s1">&#39;Person&#39;</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">schema</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;properties&#39;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="n">prop</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Person</span><span class="o">.</span><span class="n">schema_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</code></pre></div>
</div>
</div>
</div>
<p><em>(这个脚本是完整的，它应该“按原样”运行)</em></p>
<p>输出:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Person&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;age&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;name&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;age&quot;</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div></p>





                

  <script src="/flarelytics/client.js"></script>

              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            回到页面顶部
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.tabs.link", "navigation.top", "content.code.copy"], "search": "../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": {"default": "stable", "provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c2be25ad.min.js"></script>
      
        <script src="../../extra/redirects.js"></script>
      
    
  </body>
</html>