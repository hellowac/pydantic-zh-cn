
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="使用Python类型注解进行数据校验">
      
      
      
        <link rel="canonical" href="https://hellowac.github.io/pydantic-zh-cn/v1.10.7/usage/models/">
      
      
        <link rel="prev" href="../../install/">
      
      
        <link rel="next" href="../types/">
      
      <link rel="icon" href="../../favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.8">
    
    
      
        <title>模型 - Pydantic</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.ded33207.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../extra/terminal.css">
    
      <link rel="stylesheet" href="../../extra/tweaks.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="pink">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#basic-model-usage" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="Pydantic" class="md-header__button md-logo" aria-label="Pydantic" data-md-component="logo">
      
  <img src="../../logo-white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Pydantic
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              模型
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="pink"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="pink" data-md-color-accent="pink"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/hellowac/pydantic-zh-cn" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    hellowac/pydantic-zh-cn
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Pydantic" class="md-nav__button md-logo" aria-label="Pydantic" data-md-component="logo">
      
  <img src="../../logo-white.svg" alt="logo">

    </a>
    Pydantic
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/hellowac/pydantic-zh-cn" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    hellowac/pydantic-zh-cn
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        概览
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../install/" class="md-nav__link">
        安装
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          使用指南
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          使用指南
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          模型
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        模型
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#basic-model-usage" class="md-nav__link">
    基本模型使用(Basic model usage)
  </a>
  
    <nav class="md-nav" aria-label="基本模型使用(Basic model usage)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#model-properties" class="md-nav__link">
    模型属性(Model properties)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recursive-models" class="md-nav__link">
    嵌套模型(Recursive Models)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#orm-aka-arbitrary-class-instances" class="md-nav__link">
    ORM 模式【又名任意类实例】 (aka Arbitrary Class Instances)
  </a>
  
    <nav class="md-nav" aria-label="ORM 模式【又名任意类实例】 (aka Arbitrary Class Instances)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reserved-names" class="md-nav__link">
    Reserved names
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormrecursive-orm-models" class="md-nav__link">
    嵌套ORM模型(Recursive ORM models)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-binding" class="md-nav__link">
    数据绑定(Data binding)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    错误处理(Error Handling)
  </a>
  
    <nav class="md-nav" aria-label="错误处理(Error Handling)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#custom-errors" class="md-nav__link">
    自定义错误(Custom Errors)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#helper-functions" class="md-nav__link">
    辅助函数(Helper Functions)
  </a>
  
    <nav class="md-nav" aria-label="辅助函数(Helper Functions)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-models-without-validation" class="md-nav__link">
    创建无需校验的模型(Creating models without validation)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generic-models" class="md-nav__link">
    通用模型(Generic Models)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dynamic-model-creation" class="md-nav__link">
    动态模型的创建(Dynamic model creation)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#namedtupletypeddictmodel-creation-from-namedtuple-or-typeddict" class="md-nav__link">
    从NamedTuple或TypedDict创建模型(Model creation from NamedTuple or TypedDict)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-root-types" class="md-nav__link">
    自定义根类型(Custom Root Types)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#faux-immutability" class="md-nav__link">
    伪不变性(Faux Immutability)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#abstract-base-classes" class="md-nav__link">
    抽象基类(Abstract Base Classes)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#field-ordering" class="md-nav__link">
    字段顺序(Field Ordering)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#required-fields" class="md-nav__link">
    必须字段(Required fields)
  </a>
  
    <nav class="md-nav" aria-label="必须字段(Required fields)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#required-optional-fields" class="md-nav__link">
    必须但可选字段(Required Optional fields)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#field-with-dynamic-default-value" class="md-nav__link">
    具有动态默认值的字段(Field with dynamic default value)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#automatically-excluded-attributes" class="md-nav__link">
    自动排除的属性(Automatically excluded attributes)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#private-model-attributes" class="md-nav__link">
    私有模型属性(Private model attributes)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parsing-data-into-a-specified-type" class="md-nav__link">
    将数据解析为指定类型(Parsing data into a specified type)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-conversion" class="md-nav__link">
    数据转换(Data Conversion)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model-signature" class="md-nav__link">
    模型签名(Model signature)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#structural-pattern-matching" class="md-nav__link">
    结构模式匹配(Structural pattern matching)
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../types/" class="md-nav__link">
        字段类型
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../validators/" class="md-nav__link">
        字段校验
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../model_config/" class="md-nav__link">
        模型配置
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../schema/" class="md-nav__link">
        模型图式(schema)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../exporting_models/" class="md-nav__link">
        模型导出
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dataclasses/" class="md-nav__link">
        数据类
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../validation_decorator/" class="md-nav__link">
        校验装饰器
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../settings/" class="md-nav__link">
        配置管理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../postponed_annotations/" class="md-nav__link">
        延迟注解
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mypy/" class="md-nav__link">
        和mypy一起使用
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rich/" class="md-nav__link">
        和rich一起使用
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../devtools/" class="md-nav__link">
        和devtools一起使用
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          博客
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          博客
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../blog/pydantic-v2/" class="md-nav__link">
        Pydantic V2 版本计划
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        贡献参与
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../mypy_plugin/" class="md-nav__link">
        Mypy插件
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../pycharm_plugin/" class="md-nav__link">
        PyCharm插件
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../visual_studio_code/" class="md-nav__link">
        VSCode使用
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../hypothesis_plugin/" class="md-nav__link">
        Hypothesis插件'
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../datamodel_code_generator/" class="md-nav__link">
        代码生成
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/" class="md-nav__link">
        更新日志
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#basic-model-usage" class="md-nav__link">
    基本模型使用(Basic model usage)
  </a>
  
    <nav class="md-nav" aria-label="基本模型使用(Basic model usage)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#model-properties" class="md-nav__link">
    模型属性(Model properties)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recursive-models" class="md-nav__link">
    嵌套模型(Recursive Models)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#orm-aka-arbitrary-class-instances" class="md-nav__link">
    ORM 模式【又名任意类实例】 (aka Arbitrary Class Instances)
  </a>
  
    <nav class="md-nav" aria-label="ORM 模式【又名任意类实例】 (aka Arbitrary Class Instances)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reserved-names" class="md-nav__link">
    Reserved names
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ormrecursive-orm-models" class="md-nav__link">
    嵌套ORM模型(Recursive ORM models)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-binding" class="md-nav__link">
    数据绑定(Data binding)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    错误处理(Error Handling)
  </a>
  
    <nav class="md-nav" aria-label="错误处理(Error Handling)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#custom-errors" class="md-nav__link">
    自定义错误(Custom Errors)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#helper-functions" class="md-nav__link">
    辅助函数(Helper Functions)
  </a>
  
    <nav class="md-nav" aria-label="辅助函数(Helper Functions)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-models-without-validation" class="md-nav__link">
    创建无需校验的模型(Creating models without validation)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generic-models" class="md-nav__link">
    通用模型(Generic Models)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dynamic-model-creation" class="md-nav__link">
    动态模型的创建(Dynamic model creation)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#namedtupletypeddictmodel-creation-from-namedtuple-or-typeddict" class="md-nav__link">
    从NamedTuple或TypedDict创建模型(Model creation from NamedTuple or TypedDict)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-root-types" class="md-nav__link">
    自定义根类型(Custom Root Types)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#faux-immutability" class="md-nav__link">
    伪不变性(Faux Immutability)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#abstract-base-classes" class="md-nav__link">
    抽象基类(Abstract Base Classes)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#field-ordering" class="md-nav__link">
    字段顺序(Field Ordering)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#required-fields" class="md-nav__link">
    必须字段(Required fields)
  </a>
  
    <nav class="md-nav" aria-label="必须字段(Required fields)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#required-optional-fields" class="md-nav__link">
    必须但可选字段(Required Optional fields)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#field-with-dynamic-default-value" class="md-nav__link">
    具有动态默认值的字段(Field with dynamic default value)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#automatically-excluded-attributes" class="md-nav__link">
    自动排除的属性(Automatically excluded attributes)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#private-model-attributes" class="md-nav__link">
    私有模型属性(Private model attributes)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parsing-data-into-a-specified-type" class="md-nav__link">
    将数据解析为指定类型(Parsing data into a specified type)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-conversion" class="md-nav__link">
    数据转换(Data Conversion)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model-signature" class="md-nav__link">
    模型签名(Model signature)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#structural-pattern-matching" class="md-nav__link">
    结构模式匹配(Structural pattern matching)
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
  <div class="admonition success announcement">
    <p class="admonition-title">Pydantic Company</p>
    <p>We've started a company based on the principles that I believe have led to Pydantic's success.</p>
    <p>Learning more from the <a href="https://pydantic.dev/announcement/">Company Announcement</a>.</p>
  </div>

  
                  

  
  


  <h1>模型</h1>

<p>在pydantic中定义对象的主要方法是通过模型（模型只是继承自的类<code>BaseModel</code>）。</p>
<p>您可以将模型视为类似于严格类型化语言中的类型，或者视为 API 中单个端点的要求。</p>
<p>不受信任的数据可以传递给模型，在解析和验证之后，<code>pydantic</code>保证生成的模型实例的字段将符合模型上定义的字段类型。</p>
<div class="admonition 笔记">
<p class="admonition-title">笔记</p>
<p><em>pydantic</em>主要是一个解析库，<strong>而不是一个验证库</strong>。</p>
<p>验证是达到目的的一种手段：建立一个符合所提供的类型和约束的模型。</p>
<p>换句话说，<em>pydantic</em>保证输出模型的类型和约束，而不是输入数据。</p>
<p>这听起来像是一个深奥的区别，但事实并非如此。如果您不确定这意味着什么或它如何影响您的使用，您应该阅读下面有关<a href="#数据转换">数据转换</a>的部分。</p>
<p>虽然验证不是<em>pydantic</em>的主要目的，但您<strong>可以</strong>使用此库进行自定义<a href="../validators/">验证</a>。</p>
</div>
<h2 id="basic-model-usage">基本模型使用(Basic model usage)<a class="headerlink" href="#basic-model-usage" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>

<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Jane Doe&#39;</span>
</code></pre></div>
<p>这儿的 <code>User</code>是一个有两个字段的模型，<code>id</code>一个是整数，是必需的，另一个<code>name</code>是字符串，不是必需的（它有一个默认值）。<code>name</code>的类型是从默认值推断出来的，因此不需要类型注释（但是当某些字段没有类型注释时请注意有关<a href="#field-ordering">字段顺序</a>的警告）。</p>
<div class="highlight"><pre><span></span><code><span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;123&#39;</span><span class="p">)</span>
<span class="n">user_x</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;123.45&#39;</span><span class="p">)</span>
</code></pre></div>
<p>这儿的 <code>user</code> 是 <code>User</code> 的实例，<strong>对象的初始化将执行所有的解析和验证</strong>。如果没有引发<code>ValidationError</code>，则生成的模型实例是有效的。</p>
<div class="highlight"><pre><span></span><code><span class="k">assert</span> <span class="n">user</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">123</span>
<span class="k">assert</span> <span class="n">user_x</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">123</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">user_x</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>  <span class="c1"># Note that 123.45 was casted to an int and its value is 123</span>
</code></pre></div>
<p>有关<code>user_x</code>形式的数据转换的更多详细信息，请参阅<a href="#data-conversion">数据转换</a>。
模型的字段可以作为用户对象的普通属性来访问。 根据字段类型，字符串“123”已转换为 int</p>
<div class="highlight"><pre><span></span><code><span class="k">assert</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;Jane Doe&#39;</span>
</code></pre></div>
<p><code>name</code> 在用户初始化时没有设置，所以它有默认值</p>
<div class="highlight"><pre><span></span><code><span class="k">assert</span> <span class="n">user</span><span class="o">.</span><span class="n">__fields_set__</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">}</span>
</code></pre></div>
<p>初始化用户时提供的字段。</p>
<div class="highlight"><pre><span></span><code><span class="k">assert</span> <span class="n">user</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">(</span><span class="n">user</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Jane Doe&#39;</span><span class="p">}</span>
</code></pre></div>
<p><code>.dict()</code> 或 <code>dict(user)</code> 将提供字段的字典，但 <code>.dict()</code> 可以接受许多其他参数。</p>
<div class="highlight"><pre><span></span><code><span class="n">user</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">321</span>
<span class="k">assert</span> <span class="n">user</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">321</span>
</code></pre></div>
<p>该模型是可变的，因此可以更改字段值。</p>
<h3 id="model-properties">模型属性(Model properties)<a class="headerlink" href="#model-properties" title="Permanent link">&para;</a></h3>
<p>上面的例子只展示了模型可以做什么的冰山一角。模型具有以下方法和属性：</p>
<dl>
<dt><code>dict()</code></dt>
<dd>返回模型字段和值的字典形式;
参考 <a href="../exporting_models/#modeldict">导出模型</a></dd>
<dt><code>json()</code></dt>
<dd>返回一个 JSON 字符串表示 <code>dict()</code>；
参考 <a href="../exporting_models/#modeljson">导出模型</a></dd>
<dt><code>copy()</code></dt>
<dd>返回模型的副本（默认情况下为浅副本）; 参考 <a href="../exporting_models/#modelcopy">导出模型</a></dd>
<dt><code>parse_obj()</code></dt>
<dd>如果对象不是字典，则用于将任何对象加载到模型中并进行错误处理的实用程序；
参考 <a href="#helper-functions">辅助函数</a></dd>
<dt><code>parse_raw()</code></dt>
<dd>用于加载多种格式的字符串的辅助函数; 参考 [辅助函数] (#helper-functions)</dd>
<dt><code>parse_file()</code></dt>
<dd>类似于 <code>parse_raw()</code> 但用于文件路径； 参考 [辅助函数] (#helper-functions)</dd>
<dt><code>from_orm()</code></dt>
<dd>将数据从任意类加载到模型中； 参考 <a href="#orm-mode-aka-arbitrary-class-instances">ORM模式</a></dd>
<dt><code>schema()</code></dt>
<dd>返回将模型表示为 JSON Schema 的字典； 参考 <a href="../schema/">图式</a></dd>
<dt><code>schema_json()</code></dt>
<dd>返回 <code>schema()</code> 的 JSON 字符串表示； 参考 <a href="../schema/">图式</a></dd>
<dt><code>construct()</code></dt>
<dd>一种无需运行验证即可创建模型的类方法；
参考 <a href="#creating-models-without-validation">创建无需校验的模型</a></dd>
<dt><code>__fields_set__</code></dt>
<dd>初始化模型实例时设置的字段名称集</dd>
<dt><code>__fields__</code></dt>
<dd>模型字段的字典</dd>
<dt><code>__config__</code></dt>
<dd>模型的配置类, 参考 <a href="../model_config/">模型配置</a></dd>
</dl>
<h2 id="recursive-models">嵌套模型(Recursive Models)<a class="headerlink" href="#recursive-models" title="Permanent link">&para;</a></h2>
<p>可以使用模型本身作为注释中的类型来定义更复杂的分层数据结构。</p>
<p>对于自引用模型， 见 <a href="../postponed_annotations/#self-referencing-models">延时注解</a>.</p>
<h2 id="orm-aka-arbitrary-class-instances">ORM 模式【又名任意类实例】 (aka Arbitrary Class Instances)<a class="headerlink" href="#orm-aka-arbitrary-class-instances" title="Permanent link">&para;</a></h2>
<p>可以从任意类实例创建 Pydantic 模型以支持映射到 ORM 对象的模型。</p>
<p>去做这个：</p>
<ol>
<li><a href="../model_config/">Config</a> 的属性 <code>orm_mode</code> 必须设置为 <code>True</code>.</li>
<li>必须使用特殊构造函数 <code>from_orm</code> 来创建模型实例。</li>
</ol>
<p>此处的示例使用 SQLAlchemy，但同样的方法适用于任何 ORM。</p>
<h3 id="reserved-names">Reserved names<a class="headerlink" href="#reserved-names" title="Permanent link">&para;</a></h3>
<p>您可能希望在保留的 SQLAlchemy 字段之后重新命名。 在这种情况下，<strong>Field</strong> 别名会很方便：</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>上面的示例之所以有效，是因为别名优先于字段填充的字段名称。 访问 <code>SQLModel</code>的 <code>metadata</code> 属性会导致<code>ValidationError</code>。</p>
</div>
<h3 id="ormrecursive-orm-models">嵌套ORM模型(Recursive ORM models)<a class="headerlink" href="#ormrecursive-orm-models" title="Permanent link">&para;</a></h3>
<p>ORM 实例将使用 <code>from_orm</code> 递归地以及在顶层进行解析。</p>
<p>这里使用普通类来演示原理，但也可以使用任何 ORM 类。</p>
<h3 id="data-binding">数据绑定(Data binding)<a class="headerlink" href="#data-binding" title="Permanent link">&para;</a></h3>
<p>Arbitrary classes are processed by <em>pydantic</em> using the <code>GetterDict</code> class (see
<a href="https://github.com/pydantic/pydantic/blob/1.10.X-fixes/pydantic/utils.py">utils.py</a>), which attempts to
provide a dictionary-like interface to any class. You can customise how this works by setting your own
sub-class of <code>GetterDict</code> as the value of <code>Config.getter_dict</code> (see <a href="../model_config/">config</a>).</p>
<p>You can also customise class validation using <a href="../validators/#root-validators">root_validators</a> with <code>pre=True</code>.
In this case your validator function will be passed a <code>GetterDict</code> instance which you may copy and modify.</p>
<p>The <code>GetterDict</code> instance will be called for each field with a sentinel as a fallback (if no other default
value is set). Returning this sentinel means that the field is missing. Any other value will
be interpreted as the value of the field.</p>
<h2 id="error-handling">错误处理(Error Handling)<a class="headerlink" href="#error-handling" title="Permanent link">&para;</a></h2>
<p><em>pydantic</em> will raise <code>ValidationError</code> whenever it finds an error in the data it's validating.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Validation code should not raise <code>ValidationError</code> itself, but rather raise <code>ValueError</code>, <code>TypeError</code> or
<code>AssertionError</code> (or subclasses of <code>ValueError</code> or <code>TypeError</code>) which will be caught and used to populate
<code>ValidationError</code>.</p>
</div>
<p>One exception will be raised regardless of the number of errors found, that <code>ValidationError</code> will
contain information about all the errors and how they happened.</p>
<p>You can access these errors in several ways:</p>
<dl>
<dt><code>e.errors()</code></dt>
<dd>method will return list of errors found in the input data.</dd>
<dt><code>e.json()</code></dt>
<dd>method will return a JSON representation of <code>errors</code>.</dd>
<dt><code>str(e)</code></dt>
<dd>method will return a human readable representation of the errors.</dd>
</dl>
<p>Each error object contains:</p>
<dl>
<dt><code>loc</code></dt>
<dd>the error's location as a list. The first item in the list will be the field where the error occurred,
and if the field is a <a href="./#recursive-models">sub-model</a>, subsequent items will be present to indicate
the nested location of the error.</dd>
<dt><code>type</code></dt>
<dd>a computer-readable identifier of the error type.</dd>
<dt><code>msg</code></dt>
<dd>a human readable explanation of the error.</dd>
<dt><code>ctx</code></dt>
<dd>an optional object which contains values required to render the error message.</dd>
</dl>
<p>As a demonstration:</p>
<h3 id="custom-errors">自定义错误(Custom Errors)<a class="headerlink" href="#custom-errors" title="Permanent link">&para;</a></h3>
<p>In your custom data types or validators you should use <code>ValueError</code>, <code>TypeError</code> or <code>AssertionError</code> to raise errors.</p>
<p>See <a href="../validators/">validators</a> for more details on use of the <code>@validator</code> decorator.</p>
<p>You can also define your own error classes, which can specify a custom error code, message template, and context:</p>
<h2 id="helper-functions">辅助函数(Helper Functions)<a class="headerlink" href="#helper-functions" title="Permanent link">&para;</a></h2>
<p><em>Pydantic</em> provides three <code>classmethod</code> helper functions on models for parsing data:</p>
<ul>
<li><strong><code>parse_obj</code></strong>: this is very similar to the <code>__init__</code> method of the model, except it takes a dict
  rather than keyword arguments. If the object passed is not a dict a <code>ValidationError</code> will be raised.</li>
<li><strong><code>parse_raw</code></strong>: this takes a <em>str</em> or <em>bytes</em> and parses it as <em>json</em>, then passes the result to <code>parse_obj</code>.
  Parsing <em>pickle</em> data is also supported by setting the <code>content_type</code> argument appropriately.</li>
<li><strong><code>parse_file</code></strong>: this takes in a file path, reads the file and passes the contents to <code>parse_raw</code>. If <code>content_type</code> is omitted,
  it is inferred from the file's extension.</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>To quote the <a href="https://docs.python.org/3/library/pickle.html">official <code>pickle</code> docs</a>,
"The pickle module is not secure against erroneous or maliciously constructed data.
Never unpickle data received from an untrusted or unauthenticated source."</p>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Because it can result in arbitrary code execution, as a security measure, you need
to explicitly pass <code>allow_pickle</code> to the parsing function in order to load <code>pickle</code> data.</p>
</div>
<h3 id="creating-models-without-validation">创建无需校验的模型(Creating models without validation)<a class="headerlink" href="#creating-models-without-validation" title="Permanent link">&para;</a></h3>
<p><em>pydantic</em> also provides the <code>construct()</code> method which allows models to be created <strong>without validation</strong> this
can be useful when data has already been validated or comes from a trusted source and you want to create a model
as efficiently as possible (<code>construct()</code> is generally around 30x faster than creating a model with full validation).</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code>construct()</code> does not do any validation, meaning it can create models which are invalid. <strong>You should only
ever use the <code>construct()</code> method with data which has already been validated, or you trust.</strong></p>
</div>
<p>The <code>_fields_set</code> keyword argument to <code>construct()</code> is optional, but allows you to be more precise about
which fields were originally set and which weren't. If it's omitted <code>__fields_set__</code> will just be the keys
of the data provided.</p>
<p>For example, in the example above, if <code>_fields_set</code> was not provided,
<code>new_user.__fields_set__</code> would be <code>{'id', 'age', 'name'}</code>.</p>
<h2 id="generic-models">通用模型(Generic Models)<a class="headerlink" href="#generic-models" title="Permanent link">&para;</a></h2>
<p>Pydantic supports the creation of generic models to make it easier to reuse a common model structure.</p>
<p>In order to declare a generic model, you perform the following steps:</p>
<ul>
<li>Declare one or more <code>typing.TypeVar</code> instances to use to parameterize your model.</li>
<li>Declare a pydantic model that inherits from <code>pydantic.generics.GenericModel</code> and <code>typing.Generic</code>,
  where you pass the <code>TypeVar</code> instances as parameters to <code>typing.Generic</code>.</li>
<li>Use the <code>TypeVar</code> instances as annotations where you will want to replace them with other types or
  pydantic models.</li>
</ul>
<p>Here is an example using <code>GenericModel</code> to create an easily-reused HTTP response payload wrapper:</p>
<p>If you set <code>Config</code> or make use of <code>validator</code> in your generic model definition, it is applied
to concrete subclasses in the same way as when inheriting from <code>BaseModel</code>. Any methods defined on
your generic class will also be inherited.</p>
<p>Pydantic's generics also integrate properly with mypy, so you get all the type checking
you would expect mypy to provide if you were to declare the type without using <code>GenericModel</code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Internally, pydantic uses <code>create_model</code> to generate a (cached) concrete <code>BaseModel</code> at runtime,
so there is essentially zero overhead introduced by making use of <code>GenericModel</code>.</p>
</div>
<p>To inherit from a GenericModel without replacing the <code>TypeVar</code> instance, a class must also inherit from
<code>typing.Generic</code>:</p>
<p>You can also create a generic subclass of a <code>GenericModel</code> that partially or fully replaces the type
parameters in the superclass.</p>
<p>If the name of the concrete subclasses is important, you can also override the default behavior:</p>
<p>Using the same TypeVar in nested models allows you to enforce typing relationships at different points in your model:</p>
<p>Pydantic also treats <code>GenericModel</code> similarly to how it treats built-in generic types like <code>List</code> and <code>Dict</code> when it
comes to leaving them unparameterized, or using bounded <code>TypeVar</code> instances:</p>
<ul>
<li>If you don't specify parameters before instantiating the generic model, they will be treated as <code>Any</code></li>
<li>You can parametrize models with one or more <em>bounded</em> parameters to add subclass checks</li>
</ul>
<p>Also, like <code>List</code> and <code>Dict</code>, any parameters specified using a <code>TypeVar</code> can later be substituted with concrete types.</p>
<h2 id="dynamic-model-creation">动态模型的创建(Dynamic model creation)<a class="headerlink" href="#dynamic-model-creation" title="Permanent link">&para;</a></h2>
<p>There are some occasions where the shape of a model is not known until runtime. For this <em>pydantic</em> provides
the <code>create_model</code> method to allow models to be created on the fly.</p>
<p>Here <code>StaticFoobarModel</code> and <code>DynamicFoobarModel</code> are identical.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>See the note in <a href="#required-optional-fields">Required Optional Fields</a> for the distinction between an ellipsis as a
field default and annotation-only fields.
See <a href="https://github.com/pydantic/pydantic/issues/1047">pydantic/pydantic#1047</a> for more details.</p>
</div>
<p>Fields are defined by either a tuple of the form <code>(&lt;type&gt;, &lt;default value&gt;)</code> or just a default value. The
special key word arguments <code>__config__</code> and <code>__base__</code> can be used to customise the new model. This includes
extending a base model with extra fields.</p>
<p>You can also add validators by passing a dict to the <code>__validators__</code> argument.</p>
<h2 id="namedtupletypeddictmodel-creation-from-namedtuple-or-typeddict">从<code>NamedTuple</code>或<code>TypedDict</code>创建模型(Model creation from <code>NamedTuple</code> or <code>TypedDict</code>)<a class="headerlink" href="#namedtupletypeddictmodel-creation-from-namedtuple-or-typeddict" title="Permanent link">&para;</a></h2>
<p>Sometimes you already use in your application classes that inherit from <code>NamedTuple</code> or <code>TypedDict</code>
and you don't want to duplicate all your information to have a <code>BaseModel</code>.
For this <em>pydantic</em> provides <code>create_model_from_namedtuple</code> and <code>create_model_from_typeddict</code> methods.
Those methods have the exact same keyword arguments as <code>create_model</code>.</p>
<h2 id="custom-root-types">自定义根类型(Custom Root Types)<a class="headerlink" href="#custom-root-types" title="Permanent link">&para;</a></h2>
<p>Pydantic models can be defined with a custom root type by declaring the <code>__root__</code> field.</p>
<p>The root type can be any type supported by pydantic, and is specified by the type hint on the <code>__root__</code> field.
The root value can be passed to the model <code>__init__</code> via the <code>__root__</code> keyword argument, or as
the first and only argument to <code>parse_obj</code>.</p>
<p>If you call the <code>parse_obj</code> method for a model with a custom root type with a <em>dict</em> as the first argument,
the following logic is used:</p>
<ul>
<li>If the custom root type is a mapping type (eg., <code>Dict</code> or <code>Mapping</code>),
  the argument itself is always validated against the custom root type.</li>
<li>For other custom root types, if the dict has precisely one key with the value <code>__root__</code>,
  the corresponding value will be validated against the custom root type.</li>
<li>Otherwise, the dict itself is validated against the custom root type.</li>
</ul>
<p>This is demonstrated in the following example:</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Calling the <code>parse_obj</code> method on a dict with the single key <code>"__root__"</code> for non-mapping custom root types
is currently supported for backwards compatibility, but is not recommended and may be dropped in a future version.</p>
</div>
<p>If you want to access items in the <code>__root__</code> field directly or to iterate over the items, you can implement custom <code>__iter__</code> and <code>__getitem__</code> functions, as shown in the following example.</p>
<h2 id="faux-immutability">伪不变性(Faux Immutability)<a class="headerlink" href="#faux-immutability" title="Permanent link">&para;</a></h2>
<p>Models can be configured to be immutable via <code>allow_mutation = False</code>. When this is set, attempting to change the
values of instance attributes will raise errors. See <a href="../model_config/">model config</a> for more details on <code>Config</code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Immutability in Python is never strict. If developers are determined/stupid they can always
modify a so-called "immutable" object.</p>
</div>
<p>Trying to change <code>a</code> caused an error, and <code>a</code> remains unchanged. However, the dict <code>b</code> is mutable, and the
immutability of <code>foobar</code> doesn't stop <code>b</code> from being changed.</p>
<h2 id="abstract-base-classes">抽象基类(Abstract Base Classes)<a class="headerlink" href="#abstract-base-classes" title="Permanent link">&para;</a></h2>
<p>Pydantic models can be used alongside Python's
<a href="https://docs.python.org/3/library/abc.html">Abstract Base Classes</a> (ABCs).</p>
<h2 id="field-ordering">字段顺序(Field Ordering)<a class="headerlink" href="#field-ordering" title="Permanent link">&para;</a></h2>
<p>Field order is important in models for the following reasons:</p>
<ul>
<li>validation is performed in the order fields are defined; <a href="../validators/">fields validators</a>
  can access the values of earlier fields, but not later ones</li>
<li>field order is preserved in the model <a href="../schema/">schema</a></li>
<li>field order is preserved in <a href="#error-handling">validation errors</a></li>
<li>field order is preserved by <a href="../exporting_models/#modeldict"><code>.dict()</code> and <code>.json()</code> etc.</a></li>
</ul>
<p>As of <strong>v1.0</strong> all fields with annotations (whether annotation-only or with a default value) will precede
all fields without an annotation. Within their respective groups, fields remain in the order they were defined.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>As demonstrated by the example above, combining the use of annotated and non-annotated fields
in the same model can result in surprising field orderings. (This is due to limitations of Python)</p>
<p>Therefore, <strong>we recommend adding type annotations to all fields</strong>, even when a default value
would determine the type by itself to guarantee field order is preserved.</p>
</div>
<h2 id="required-fields">必须字段(Required fields)<a class="headerlink" href="#required-fields" title="Permanent link">&para;</a></h2>
<p>To declare a field as required, you may declare it using just an annotation, or you may use an ellipsis (<code>...</code>)
as the value:</p>
<p>Where <code>Field</code> refers to the <a href="../schema/#field-customization">field function</a>.</p>
<p>Here <code>a</code>, <code>b</code> and <code>c</code> are all required. However, use of the ellipses in <code>b</code> will not work well
with <a href="../mypy/">mypy</a>, and as of <strong>v1.0</strong> should be avoided in most cases.</p>
<h3 id="required-optional-fields">必须但可选字段(Required Optional fields)<a class="headerlink" href="#required-optional-fields" title="Permanent link">&para;</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Since version <strong>v1.2</strong> annotation only nullable (<code>Optional[...]</code>, <code>Union[None, ...]</code> and <code>Any</code>) fields and nullable
fields with an ellipsis (<code>...</code>) as the default value, no longer mean the same thing.</p>
<p>In some situations this may cause <strong>v1.2</strong> to not be entirely backwards compatible with earlier <strong>v1.</strong>* releases.</p>
</div>
<p>If you want to specify a field that can take a <code>None</code> value while still being required,
you can use <code>Optional</code> with <code>...</code>:</p>
<p>In this model, <code>a</code>, <code>b</code>, and <code>c</code> can take <code>None</code> as a value. But <code>a</code> is optional, while <code>b</code> and <code>c</code> are required.
<code>b</code> and <code>c</code> require a value, even if the value is <code>None</code>.</p>
<h2 id="field-with-dynamic-default-value">具有动态默认值的字段(Field with dynamic default value)<a class="headerlink" href="#field-with-dynamic-default-value" title="Permanent link">&para;</a></h2>
<p>When declaring a field with a default value, you may want it to be dynamic (i.e. different for each model).
To do this, you may want to use a <code>default_factory</code>.</p>
<div class="admonition info">
<p class="admonition-title">In Beta</p>
<p>The <code>default_factory</code> argument is in <strong>beta</strong>, it has been added to <em>pydantic</em> in <strong>v1.5</strong> on a
<strong>provisional basis</strong>. It may change significantly in future releases and its signature or behaviour will not
be concrete until <strong>v2</strong>. Feedback from the community while it's still provisional would be extremely useful;
either comment on <a href="https://github.com/pydantic/pydantic/issues/866">#866</a> or create a new issue.</p>
</div>
<p>Example of usage:</p>
<p>Where <code>Field</code> refers to the <a href="../schema/#field-customization">field function</a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <code>default_factory</code> expects the field type to be set.</p>
</div>
<h2 id="automatically-excluded-attributes">自动排除的属性(Automatically excluded attributes)<a class="headerlink" href="#automatically-excluded-attributes" title="Permanent link">&para;</a></h2>
<p>Class variables which begin with an underscore and attributes annotated with <code>typing.ClassVar</code> will be
automatically excluded from the model.</p>
<h2 id="private-model-attributes">私有模型属性(Private model attributes)<a class="headerlink" href="#private-model-attributes" title="Permanent link">&para;</a></h2>
<p>If you need to vary or manipulate internal attributes on instances of the model, you can declare them
using <code>PrivateAttr</code>:</p>
<p>Private attribute names must start with underscore to prevent conflicts with model fields: both <code>_attr</code> and <code>__attr__</code>
are supported.</p>
<p>If <code>Config.underscore_attrs_are_private</code> is <code>True</code>, any non-ClassVar underscore attribute will be treated as private:</p>
<p>Upon class creation pydantic constructs <code>__slots__</code> filled with private attributes.</p>
<h2 id="parsing-data-into-a-specified-type">将数据解析为指定类型(Parsing data into a specified type)<a class="headerlink" href="#parsing-data-into-a-specified-type" title="Permanent link">&para;</a></h2>
<p>Pydantic includes a standalone utility function <code>parse_obj_as</code> that can be used to apply the parsing
logic used to populate pydantic models in a more ad-hoc way. This function behaves similarly to
<code>BaseModel.parse_obj</code>, but works with arbitrary pydantic-compatible types.</p>
<p>This is especially useful when you want to parse results into a type that is not a direct subclass of <code>BaseModel</code>.
For example:</p>
<p>This function is capable of parsing data into any of the types pydantic can handle as fields of a <code>BaseModel</code>.</p>
<p>Pydantic also includes two similar standalone functions called <code>parse_file_as</code> and <code>parse_raw_as</code>,
which are analogous to <code>BaseModel.parse_file</code> and <code>BaseModel.parse_raw</code>.</p>
<h2 id="data-conversion">数据转换(Data Conversion)<a class="headerlink" href="#data-conversion" title="Permanent link">&para;</a></h2>
<p><em>pydantic</em> may cast input data to force it to conform to model field types,
and in some cases this may result in a loss of information.
For example:</p>
<p>This is a deliberate decision of <em>pydantic</em>, and in general it's the most useful approach. See
<a href="https://github.com/pydantic/pydantic/issues/578">here</a> for a longer discussion on the subject.</p>
<p>Nevertheless, <a href="../types/#strict-types">strict type checking</a> is partially supported.</p>
<h2 id="model-signature">模型签名(Model signature)<a class="headerlink" href="#model-signature" title="Permanent link">&para;</a></h2>
<p>All <em>pydantic</em> models will have their signature generated based on their fields:</p>
<p>An accurate signature is useful for introspection purposes and libraries like <code>FastAPI</code> or <code>hypothesis</code>.</p>
<p>The generated signature will also respect custom <code>__init__</code> functions:</p>
<p>To be included in the signature, a field's alias or name must be a valid Python identifier.
<em>pydantic</em> prefers aliases over names, but may use field names if the alias is not a valid Python identifier.</p>
<p>If a field's alias and name are both invalid identifiers, a <code>**data</code> argument will be added.
In addition, the <code>**data</code> argument will always be present in the signature if <code>Config.extra</code> is <code>Extra.allow</code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Types in the model signature are the same as declared in model annotations,
not necessarily all the types that can actually be provided to that field.
This may be fixed one day once <a href="https://github.com/pydantic/pydantic/issues/1055">#1055</a> is solved.</p>
</div>
<h2 id="structural-pattern-matching">结构模式匹配(Structural pattern matching)<a class="headerlink" href="#structural-pattern-matching" title="Permanent link">&para;</a></h2>
<p><em>pydantic</em> supports structural pattern matching for models, as introduced by <a href="https://peps.python.org/pep-0636/">PEP 636</a> in Python 3.10.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A match-case statement may seem as if it creates a new model, but don't be fooled;<br />
it is just syntactic sugar for getting an attribute and either comparing it or declaring and initializing it.</p>
</div>





                

  <script src="/flarelytics/client.js"></script>

              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            回到页面顶部
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.tabs.link", "navigation.top"], "search": "../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.51198bba.min.js"></script>
      
        <script src="../../extra/redirects.js"></script>
      
    
  </body>
</html>